{"remainingRequest":"D:\\Projects\\Fiber2\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projects\\Fiber2\\web\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projects\\Fiber2\\web\\src\\views\\Login.vue","mtime":1607993373724},{"path":"D:\\Projects\\Fiber2\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\Fiber2\\web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Projects\\Fiber2\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\Fiber2\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCBmYWN0b3J5IGZyb20gIi4uL3NlcnZlci9mYWN0b3J5L2ZhY3RvcnkiOw0KaW1wb3J0IGNvbW1vbiBmcm9tICdAL3NlcnZlci9jb21tb24vY29tbW9uLmpzJzsNCmNvbnN0IGF1dGggPSBmYWN0b3J5LmdldCgiYXV0aCIpOw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIGRhdGEoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAvL8SQxINuZyBuaOG6rXANCg0KICAgICAgICAgICAgbG9naW5WYWxpZDpmYWxzZSwNCiAgICAgICAgICAgIHVzZXJuYW1lOm51bGwsDQogICAgICAgICAgICBwYXNzd29yZDpudWxsLA0KICAgICAgICAgICAgdGV4dFJ1bGVzOiBbDQogICAgICAgICAgICAgICAgdiA9PiAhIXYgfHwgJ0tow7RuZyDEkcaw4bujYyBi4buPIHRy4buRbmcnLA0KICAgICAgICAgICAgXSwNCg0KICAgICAgICAgICAgLy9zbmFwYmFyDQoNCiAgICAgICAgICAgIHNuYWNrYmFyOiBmYWxzZSwNCiAgICAgICAgICAgIHRleHQ6IG51bGwsDQogICAgICAgICAgICANCiAgICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgIA0KDQogICAgICAgIA0KICAgICAgICAvL8SQxINuZyBuaOG6rXANCiAgICAgICAgbG9naW4oKSB7DQogICAgICAgICAgICB2YXIgdmFsaWRhdGUgPSB0aGlzLiRyZWZzLmxvZ2luRm9ybS52YWxpZGF0ZSgpOw0KICAgICAgICAgICAgaWYodmFsaWRhdGUpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsNCiAgICAgICAgICAgICAgICB2YXIgdXNlcj17bWFfTkQ6c2VsZi51c2VybmFtZSwgTWF0a2hhdTpzZWxmLnBhc3N3b3JkfTsNCiAgICAgICAgICAgICAgICBhdXRoLmF1dGgodXNlcikudGhlbihyZXNwb25zZT0+ew0KICAgICAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLnN1Y2Nlc3Mpew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hX05EOiByZXNwb25zZS5kYXRhLmRhdGEubmd1b2lkdW5nLm1hX05ELA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbl9OVjogcmVzcG9uc2UuZGF0YS5kYXRhLm5ndW9pZHVuZy50ZW5fTlYsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IHJlc3BvbnNlLmRhdGEuZGF0YS50b2tlbi5hY2Nlc3NfdG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXh0aG91ciA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBuZXh0aG91ci5zZXREYXRlKHRvZGF5LmdldERhdGUoKSArIHJlc3BvbnNlLmRhdGEuZGF0YS50b2tlbi5leHBpcmVzX2luLzg2NDAwKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICJ0b2tlbl9zZXNzaW9uPSIgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgKyAiO2V4cGlyZXMgPSIgK25leHRob3VyICsiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dD0ixJDEg25nIG5o4bqtcCB0aMOgbmggY8O0bmciOw0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zbmFja2Jhcj10cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi4kcm91dGVyLnB1c2goIi9ob21lIik7DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRleHQ9cmVzcG9uc2UuZGF0YS5tZXNzYWdlOw0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zbmFja2Jhcj10cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0sDQoNCn0NCg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <v-container class=\"fill-height\">\r\n        <v-row align=\"center\" justify=\"center\" no-gutters>\r\n            <v-col cols=\"12\" sm=\"5\">\r\n                <v-card\r\n                class=\"mx-auto\"\r\n                max-width=\"auto\"\r\n                outlined>\r\n                    <v-card-text>\r\n                        <v-card-title class=\"blue--text darken-1--text\">\r\n                            ĐĂNG NHẬP\r\n                        </v-card-title>\r\n                        \r\n                        <v-card-subtitle  class=\"blue--text darken-1--text\">\r\n                            Chương trình tính thù lao Fiber\r\n                        </v-card-subtitle>\r\n                         <v-row align=\"center\" justify=\"center\" no-gutters>\r\n                            <v-col cols=\"12\" sm=\"10\">\r\n                            <v-form\r\n                            ref=\"loginForm\"\r\n                            v-model=\"loginValid\"\r\n                            lazy-validation\r\n                            >\r\n                                <v-text-field\r\n                                outlined\r\n                                dense\r\n                                v-model=\"username\"\r\n                                :rules=\"textRules\"\r\n                                label=\"Người dùng\"\r\n                                \r\n                                required\r\n                                ></v-text-field>\r\n                                <v-text-field\r\n                                outlined\r\n                                dense\r\n                                v-model=\"password\"\r\n                                :rules=\"textRules\"\r\n                                :type=\"'password'\"\r\n                                label=\"Mật khẩu\"\r\n                                required\r\n                                ></v-text-field>\r\n                                <v-row align=\"center\" justify=\"center\" no-gutters>\r\n                                    <v-btn\r\n                                    color=\"primary\"\r\n                                    depressed\r\n                                    @click=\"login()\"\r\n                                    :disabled=\"!loginValid\"\r\n                                    >\r\n                                    Đăng nhập\r\n                                    </v-btn>\r\n                                </v-row>\r\n                            </v-form>\r\n                            </v-col>\r\n                         </v-row>\r\n                    </v-card-text>\r\n                \r\n                </v-card>\r\n            </v-col>\r\n        </v-row>\r\n        <v-row>\r\n            <v-snackbar\r\n                v-model=\"snackbar\"\r\n                >\r\n                {{ text }}\r\n                <template v-slot:action=\"{ attrs }\">\r\n                    <v-btn\r\n                    color=\"primary\"\r\n                    text\r\n                    v-bind=\"attrs\"\r\n                    @click=\"snackbar = false\"\r\n                    >\r\n                    Đóng\r\n                    </v-btn>\r\n                </template>\r\n            </v-snackbar>\r\n        </v-row>\r\n    </v-container>\r\n</template>\r\n\r\n<script>\r\n\r\nimport factory from \"../server/factory/factory\";\r\nimport common from '@/server/common/common.js';\r\nconst auth = factory.get(\"auth\");\r\nexport default {\r\n    data() {\r\n        return {\r\n            //Đăng nhập\r\n\r\n            loginValid:false,\r\n            username:null,\r\n            password:null,\r\n            textRules: [\r\n                v => !!v || 'Không được bỏ trống',\r\n            ],\r\n\r\n            //snapbar\r\n\r\n            snackbar: false,\r\n            text: null,\r\n            \r\n        }\r\n    },\r\n    methods: {\r\n       \r\n\r\n        \r\n        //Đăng nhập\r\n        login() {\r\n            var validate = this.$refs.loginForm.validate();\r\n            if(validate)\r\n            {\r\n                var self=this;\r\n                var user={ma_ND:self.username, Matkhau:self.password};\r\n                auth.auth(user).then(response=>{\r\n                    if(response.data.success){\r\n                        var value = {\r\n                            ma_ND: response.data.data.nguoidung.ma_ND,\r\n                            ten_NV: response.data.data.nguoidung.ten_NV,\r\n                            token: response.data.data.token.access_token,\r\n                        };\r\n                        var today = new Date();\r\n                        var nexthour = new Date();\r\n                        nexthour.setDate(today.getDate() + response.data.data.token.expires_in/86400);\r\n                        document.cookie = \"token_session=\" + JSON.stringify(value) + \";expires =\" +nexthour +\"\";\r\n                        self.text=\"Đăng nhập thành công\";\r\n                        self.snackbar=true;\r\n                        self.$router.push(\"/home\");\r\n                        \r\n                    }else{\r\n                        self.text=response.data.message;\r\n                        self.snackbar=true;\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    },\r\n\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"]}]}